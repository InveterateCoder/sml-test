{"version":3,"sources":["webpack://sml-test/./server/controllers/getStudentsController.ts","webpack://sml-test/./server/controllers/renderController.ts","webpack://sml-test/./server/infrastructure/apiRoutes.ts","webpack://sml-test/./server/models/StudentModel.ts","webpack://sml-test/./server/server.ts","webpack://sml-test/external \"dotenv\"","webpack://sml-test/external \"dotenv-expand\"","webpack://sml-test/external \"express\"","webpack://sml-test/external \"mongoose\"","webpack://sml-test/external \"path\"","webpack://sml-test/external \"swagger-ui-express\"","webpack://sml-test/webpack/bootstrap","webpack://sml-test/webpack/runtime/compat get default export","webpack://sml-test/webpack/runtime/define property getters","webpack://sml-test/webpack/runtime/hasOwnProperty shorthand","webpack://sml-test/webpack/runtime/make namespace object","webpack://sml-test/webpack/startup"],"names":["getStudentsController","req","res","students","Student","exec","map","doc","obj","toObject","id","_id","undefined","__v","json","err","status","send","message","renderController","render","api","Router","get","getStudents","StudentSchema","Schema","avatar","String","firstName","type","minlength","maxlength","required","index","lastName","middleName","dob","Date","grade","Number","min","max","performance","model","dotenvExpand","dotenv","DB_URL","process","env","port","PORT","startServer","app","express","set","server","use","path","__dirname","extended","swaggerUi","swaggerDocument","apiRoutes","connect","useNewUrlParser","useUnifiedTopology","useCreateIndex","listen","console","log","close","error"],"mappings":"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","file":"server.js","sourcesContent":["import { Request, Response } from 'express'\nimport Student from '../models/StudentModel'\n\nasync function getStudentsController(req: Request, res: Response): Promise<void> {\n  try {\n    const students = (await Student.find({}).exec()).map(doc => {\n      const obj = doc.toObject()\n      return { id: obj._id, ...obj, _id: undefined, __v: undefined }\n    })\n    res.json(students)\n  } catch (err) {\n    res.status(500).send(err.message)\n  }\n}\n\nexport default getStudentsController\n","import { Request, Response } from 'express'\n\nasync function renderController(req: Request, res: Response): Promise<void> {\n  try {\n    res.render('index')\n  } catch (err) {\n    res.status(500).send(err.message)\n  }\n}\n\nexport default renderController\n","import { Router } from 'express'\nimport getStudents from '../controllers/getStudentsController'\n\nconst api = Router()\n\napi.get('/students', getStudents)\n\nexport default api\n","import { Schema, model } from 'mongoose'\n\nconst StudentSchema = new Schema({\n  avatar: String,\n  firstName: {\n    type: String,\n    minlength: [2, \"Minimum first name's length is 2\"],\n    maxlength: [26, \"Maximum first name's length is 26\"],\n    required: [true, \"Must provide the student's first name\"],\n    index: true,\n  },\n  lastName: {\n    type: String,\n    minlength: [2, \"Minimum last name's length is 2\"],\n    maxlength: [26, \"Maximum last name's length is 26\"],\n    required: [true, \"Must provide the student's last name\"],\n    index: true,\n  },\n  middleName: {\n    type: String,\n    minlength: [2, \"Minimum middle name's length is 2\"],\n    maxlength: [26, \"Maximum middle name's length is 26\"],\n    required: [true, \"Must provide the student's middle name\"],\n    index: true,\n  },\n  dob: {\n    type: Date,\n    required: [true, \"Must provide the student's date of birth\"]\n  },\n  grade: {\n    type: Number,\n    min: [1, \"Wrong grade number\"],\n    max: [5, \"Wrong grade number\"],\n    required: [true, \"Must provide the student's class\"]\n  },\n  performance: {\n    type: Number,\n    min: [2, \"Wrong performance mark\"],\n    max: [5, \"Wrong performance mark\"],\n    required: [true, \"Must provide the student's performance\"]\n  }\n})\n\nexport default model('Student', StudentSchema)","import path from 'path'\nimport dotenv from 'dotenv'\nimport dotenvExpand from 'dotenv-expand'\nimport express from 'express'\nimport { connect } from 'mongoose'\nimport swaggerUi from 'swagger-ui-express'\nimport swaggerDocument from './swagger.json'\nimport apiRoutes from './infrastructure/apiRoutes'\nimport renderController from './controllers/renderController'\n\ndotenvExpand(dotenv.config())\n\nconst DB_URL = process.env.DB_URL || 'mongodb://localhost:27017/fake_school'\nconst port = process.env.PORT || 8000\n\nasync function startServer() {\n  const app = express()\n  app.set('view engine', 'ejs')\n  let server = null\n  try {\n    app\n      .use(express.static(path.resolve(__dirname, 'public')))\n      .use(express.json())\n      .use(express.urlencoded({ extended: true }))\n      .use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument))\n      .use('/api', apiRoutes)\n\n    app.get('*', renderController)\n\n    await connect(DB_URL, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n      useCreateIndex: true,\n    })\n    server = app.listen(port, () => console.log(`server started on port ${port}`))\n  } catch (err) {\n    server?.close()\n    console.error(err)\n  }\n}\n\nstartServer()","module.exports = require(\"dotenv\");;","module.exports = require(\"dotenv-expand\");;","module.exports = require(\"express\");;","module.exports = require(\"mongoose\");;","module.exports = require(\"path\");;","module.exports = require(\"swagger-ui-express\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./server/server.ts\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}